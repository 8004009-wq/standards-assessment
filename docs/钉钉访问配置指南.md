# é’‰é’‰è®¿é—®é…ç½®æŒ‡å—

## æ–¹æ¡ˆä¸€ï¼šå†…ç½‘ç©¿é€ï¼ˆæ¨èï¼Œ5 åˆ†é’Ÿæå®šï¼‰

### ä½¿ç”¨ cpolarï¼ˆå›½å†…ï¼Œé€Ÿåº¦å¿«ï¼‰

#### 1. å®‰è£… cpolar

```bash
# ä¸‹è½½å¹¶å®‰è£…
curl https://get.cpolar.com | sudo sh

# æˆ–è€…æ‰‹åŠ¨ä¸‹è½½
wget https://static.cpolar.com/downloads/cpolar-linux-amd64.zip
unzip cpolar-linux-amd64.zip
sudo cp cpolar /usr/local/bin/
```

#### 2. æ³¨å†Œå¹¶è·å– Token

1. è®¿é—® https://www.cpolar.com/
2. æ³¨å†Œè´¦å·
3. è·å–è®¤è¯ Token

#### 3. é…ç½® cpolar

```bash
# è®¤è¯
cpolar authtoken <your-token>

# å¯åŠ¨éš§é“ï¼ˆå°† 8080 ç«¯å£æš´éœ²åˆ°å…¬ç½‘ï¼‰
cpolar http 8080
```

#### 4. è·å–å…¬ç½‘åœ°å€

å¯åŠ¨åä¼šæ˜¾ç¤ºï¼š
```
Forwarding: https://xxxxx.cpolar.cn -> http://localhost:8080
```

#### 5. åœ¨é’‰é’‰ä¸­è®¿é—®

- ç›´æ¥åœ¨é’‰é’‰èŠå¤©æ¡†æˆ–æµè§ˆå™¨ä¸­æ‰“å¼€ï¼š`https://xxxxx.cpolar.cn`
- æˆ–åˆ›å»ºé’‰é’‰å¾®åº”ç”¨ï¼Œå¡«å…¥è¯¥åœ°å€

---

### ä½¿ç”¨ ngrokï¼ˆå›½é™…ï¼‰

```bash
# å®‰è£…
wget https://bin.equinox.io/c/bNyj1mQVY4c/ngrok-v3-stable-linux-amd64.tgz
tar xzvf ngrok-v3-stable-linux-amd64.tgz
sudo mv ngrok /usr/local/bin/

# é…ç½®ï¼ˆéœ€è¦æ³¨å†Œ https://ngrok.comï¼‰
ngrok config add-authtoken <your-token>

# å¯åŠ¨
ngrok http 8080
```

---

## æ–¹æ¡ˆäºŒï¼šä½¿ç”¨æœåŠ¡å™¨å…¬ç½‘ IP

å¦‚æœæ‚¨æœ‰äº‘æœåŠ¡å™¨ï¼ˆé˜¿é‡Œäº‘ã€è…¾è®¯äº‘ç­‰ï¼‰ï¼š

### 1. ä¿®æ”¹åç«¯é…ç½®

ç¼–è¾‘ `backend/main.py`ï¼Œå…è®¸å¤–éƒ¨è®¿é—®ï¼š

```python
uvicorn.run(app, host="0.0.0.0", port=8001)
```

### 2. ä¿®æ”¹å‰ç«¯ API åœ°å€

ç¼–è¾‘ `frontend/index.html`ï¼š

```javascript
// å°† localhost æ”¹ä¸ºæœåŠ¡å™¨å…¬ç½‘ IP
const API_BASE = 'http://<æœåŠ¡å™¨å…¬ç½‘ IP>:8001/api';
```

### 3. å¯åŠ¨æœåŠ¡

```bash
cd /home/admin/openclaw/workspace/standards-assessment
./start.sh
```

### 4. é…ç½®é˜²ç«å¢™

```bash
# å¼€æ”¾ç«¯å£
sudo ufw allow 8001
sudo ufw allow 8080

# æˆ–è€…ä½¿ç”¨ firewall-cmdï¼ˆCentOSï¼‰
sudo firewall-cmd --permanent --add-port=8001/tcp
sudo firewall-cmd --permanent --add-port=8080/tcp
sudo firewall-cmd --reload
```

### 5. åœ¨é’‰é’‰ä¸­è®¿é—®

```
http://<æœåŠ¡å™¨å…¬ç½‘ IP>:8080
```

---

## æ–¹æ¡ˆä¸‰ï¼šé’‰é’‰å¾®åº”ç”¨ï¼ˆä¼ä¸šæ­£å¼ä½¿ç”¨ï¼‰

### 1. ç™»å½•é’‰é’‰ç®¡ç†åå°

è®¿é—®ï¼šhttps://oa.dingtalk.com/

### 2. åˆ›å»ºå¾®åº”ç”¨

1. è¿›å…¥ã€Œå·¥ä½œå°ã€â†’ã€Œåº”ç”¨ç®¡ç†ã€
2. ç‚¹å‡»ã€Œåˆ›å»ºåº”ç”¨ã€
3. é€‰æ‹©ã€ŒH5 å¾®åº”ç”¨ã€
4. å¡«å†™åº”ç”¨ä¿¡æ¯ï¼š
   - åº”ç”¨åç§°ï¼šæ ‡å‡†è‡ªè¯„ä¼°ç³»ç»Ÿ
   - åº”ç”¨å›¾æ ‡ï¼šä¸Šä¼  logo
   - é¦–é¡µåœ°å€ï¼š`https://your-domain.com`ï¼ˆéœ€è¦ HTTPSï¼‰

### 3. é…ç½®å®‰å…¨åŸŸå

1. è¿›å…¥åº”ç”¨ç®¡ç†
2. é…ç½®ã€Œå®‰å…¨åŸŸåã€
3. æ·»åŠ æ‚¨çš„æœåŠ¡å™¨åŸŸå

### 4. å‘å¸ƒåº”ç”¨

1. æäº¤å®¡æ ¸
2. å®¡æ ¸é€šè¿‡åå‘å¸ƒ
3. å‘˜å·¥å¯åœ¨å·¥ä½œå°è®¿é—®

---

## æ–¹æ¡ˆå››ï¼šé’‰é’‰ç¾¤æœºå™¨äººï¼ˆç®€å•é€šçŸ¥ï¼‰

å¦‚æœåªæ˜¯æƒ³åœ¨é’‰é’‰ä¸­æ¥æ”¶è¯„ä¼°é€šçŸ¥ï¼š

### 1. æ·»åŠ ç¾¤æœºå™¨äºº

1. é’‰é’‰ç¾¤ â†’ ç¾¤è®¾ç½® â†’ æ™ºèƒ½ç¾¤åŠ©æ‰‹
2. æ·»åŠ æœºå™¨äºº â†’ è‡ªå®šä¹‰
3. è·å– Webhook URL

### 2. é…ç½®é€šçŸ¥

ç¼–è¾‘ `backend/main.py`ï¼Œæ·»åŠ é’‰é’‰é€šçŸ¥åŠŸèƒ½ï¼š

```python
import requests

def send_dingtalk_notification(message):
    webhook = "https://oapi.dingtalk.com/robot/send?access_token=YOUR_TOKEN"
    data = {
        "msgtype": "link",
        "link": {
            "text": message,
            "title": "è¯„ä¼°ä»»åŠ¡é€šçŸ¥",
            "picUrl": "",
            "messageUrl": "http://your-server:8080"
        }
    }
    requests.post(webhook, json=data)
```

---

## ğŸ”’ HTTPS é…ç½®ï¼ˆæ¨èï¼‰

é’‰é’‰è¦æ±‚å¾®åº”ç”¨å¿…é¡»ä½¿ç”¨ HTTPSï¼š

### ä½¿ç”¨ Nginx åå‘ä»£ç†

```nginx
server {
    listen 443 ssl;
    server_name your-domain.com;
    
    ssl_certificate /path/to/cert.pem;
    ssl_certificate_key /path/to/key.pem;
    
    location / {
        proxy_pass http://127.0.0.1:8080;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
    
    location /api/ {
        proxy_pass http://127.0.0.1:8001;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```

### å…è´¹ SSL è¯ä¹¦

- [Let's Encrypt](https://letsencrypt.org/) - å…è´¹ 90 å¤©ï¼Œå¯ç»­æœŸ
- [é˜¿é‡Œäº‘ SSL](https://www.aliyun.com/product/cas) - å…è´¹ 1 å¹´
- [è…¾è®¯äº‘ SSL](https://cloud.tencent.com/product/ssl) - å…è´¹ 1 å¹´

---

## ğŸ“± é’‰é’‰æ‰«ç è®¿é—®

### ç”ŸæˆäºŒç»´ç 

```bash
# å®‰è£… qrcode
pip install qrcode[pil]

# ç”ŸæˆäºŒç»´ç 
python3 -c "
import qrcode
qr = qrcode.QRCode(version=1, box_size=10, border=5)
qr.add_data('https://your-domain.com')
qr.make(fit=True)
img = qr.make_image(fill='black', back_color='white')
img.save('/tmp/access_qr.png')
print('äºŒç»´ç å·²ç”Ÿæˆï¼š/tmp/access_qr.png')
"
```

### åœ¨é’‰é’‰ä¸­åˆ†äº«

1. å°†äºŒç»´ç å›¾ç‰‡å‘é€åˆ°é’‰é’‰ç¾¤
2. æˆå‘˜æ‰«ç å³å¯è®¿é—®

---

## âš ï¸ æ³¨æ„äº‹é¡¹

### å®‰å…¨é…ç½®

1. **ä¿®æ”¹é»˜è®¤å¯†ç **ï¼šå¦‚æœæœ‰ç™»å½•åŠŸèƒ½
2. **å¯ç”¨ HTTPS**ï¼šé’‰é’‰è¦æ±‚
3. **é…ç½® CORS**ï¼šå…è®¸é’‰é’‰åŸŸåè®¿é—®
4. **é™åˆ¶è®¿é—® IP**ï¼šåªå…è®¸ä¼ä¸š IP æ®µ

### æ€§èƒ½ä¼˜åŒ–

1. **ä½¿ç”¨ Nginx**ï¼šåå‘ä»£ç† + é™æ€æ–‡ä»¶ç¼“å­˜
2. **å¯ç”¨ Gzip**ï¼šå‹ç¼©ä¼ è¾“
3. **æ•°æ®åº“ä¼˜åŒ–**ï¼šä½¿ç”¨ PostgreSQL

### ç›‘æ§å‘Šè­¦

1. **æœåŠ¡ç›‘æ§**ï¼šä½¿ç”¨ Prometheus + Grafana
2. **æ—¥å¿—è®°å½•**ï¼šELK æˆ–ç®€å•æ—¥å¿—
3. **é’‰é’‰å‘Šè­¦**ï¼šæœåŠ¡å¼‚å¸¸æ—¶é€šçŸ¥

---

## ğŸ†˜ å¿«é€Ÿæµ‹è¯•

### ä¸´æ—¶æµ‹è¯•ï¼ˆæ— éœ€å®‰è£…ï¼‰

ä½¿ç”¨ [ngrok](https://ngrok.com/) å¿«é€Ÿæµ‹è¯•ï¼š

```bash
# ä¸‹è½½
wget https://bin.equinox.io/c/bNyj1mQVY4c/ngrok-v3-stable-linux-amd64.tgz
tar xzvf ngrok-v3-stable-linux-amd64.tgz

# è¿è¡Œï¼ˆéœ€è¦æ³¨å†Œè·å– tokenï¼‰
./ngrok config add-authtoken <token>
./ngrok http 8080
```

ä¼šç”Ÿæˆä¸€ä¸ªä¸´æ—¶å…¬ç½‘åœ°å€ï¼Œæœ‰æ•ˆæœŸå‡ å°æ—¶ã€‚

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

- **cpolar æ–‡æ¡£**: https://www.cpolar.com/docs/
- **ngrok æ–‡æ¡£**: https://ngrok.com/docs/
- **é’‰é’‰å¼€æ”¾å¹³å°**: https://open.dingtalk.com/

---

**æ›´æ–°æ—¥æœŸ**: 2026 å¹´ 2 æœˆ  
**é€‚ç”¨**: æ ‡å‡†è‡ªè¯„ä¼°ç³»ç»Ÿé’‰é’‰è®¿é—®é…ç½®
